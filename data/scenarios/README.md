# シナリオファイル（.convo）について

## 現在の実装状況

**重要**: 現時点ではSTT（音声認識）機能がないため、`.convo`ファイルの`#bot`部分に記述されたテキストは**期待される応答**として記録されますが、**実際のボット発話内容とは比較されません**。

### 現在検証できること

- ✅ **ボット発話のタイミング**: VADでボット発話の開始/終了を検出
- ✅ **ユーザー発話のタイミング**: 音声ファイル送信のタイミングを記録
- ❌ **ボット発話の内容**: STTがないため、何を話したかは検証できない

### 現在検証できないこと

- ❌ ボットが期待通りの内容を話したか
- ❌ ボットの発話内容の正確性
- ❌ 発話内容の意味的な評価

## .convoファイルの書き方

現時点では、`.convo`ファイルは以下の目的で使用されます：

1. **シナリオの構造定義**: ユーザーとボットの対話の流れを定義
2. **タイミング制御**: どのタイミングでユーザー発話を送信し、ボット応答を待つかを制御

### 形式

現時点ではTTS/STTがないため、以下の形式を使用します：

```
#me <audio_file_path>
#bot [speechStart]
#bot [speechEnd]
```

### 例

```
#me data/reports/recorded_20251219_120822.wav
#bot [speechStart]
#bot [speechEnd]

#me data/reports/recorded_20251219_120822.wav
#bot [speechStart]
#bot [speechEnd]
```

この場合：
- `#me <audio_file_path>`: 指定された音声ファイルをユーザー発話として送信
- `#bot [speechStart]`: ボット発話の開始を待機（VAD検出）
- `#bot [speechEnd]`: ボット発話の終了を待機（VAD検出）

## 将来的な拡張

STT（Whisper等）を統合した際には：

1. ボット発話を音声認識してテキスト化
2. `.convo`ファイルの`#bot`部分の期待値と実際の発話内容を比較
3. 内容の一致度や意味的な評価を行う

## 参考

- Botium形式の`.convo`ファイル形式を採用
- `#me`: ユーザー発話
- `#bot`: ボット発話（期待値）

